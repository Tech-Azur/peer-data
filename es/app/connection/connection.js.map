{"version":3,"file":"connection.js","sourceRoot":"","sources":["../../../src/app/connection/connection.ts"],"names":[],"mappings":"AAGA,MAAM;IAMJ,YAAY,UAA4B,EAAE,EAAE,kBAAsC,IAAI;QAL9E,aAAQ,GAAqB,EAAE,CAAC;QAChC,qBAAgB,GAAwB,IAAI,CAAC;QAC7C,WAAM,GAAmB,EAAE,CAAC;QAC5B,cAAS,GAA0B,EAAE,CAAC;QAG5C,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QACxB,IAAI,CAAC,gBAAgB,GAAG,eAAe,CAAC;IAC1C,CAAC;IAED,IAAI,KAAK;QACP,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;IACrB,CAAC;IAED,IAAI,QAAQ;QACV,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC;IACxB,CAAC;IAED,OAAO,CAAC,EAAU,EAAE,IAAuB;QACzC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YACpC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;QACzB,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,UAAU,CAAC,EAAU;QACnB,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YACnC,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC;YACxB,OAAO,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;YACvB,OAAO,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QACzB,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,UAAU,CAAC,EAAU,EAAE,OAAuB;QAC5C,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YACvC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC;QAC/B,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,aAAa,CAAC,EAAU;QACtB,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YACtC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,KAAK,EAAE,CAAC;YAC3B,OAAO,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;QAC5B,CAAC;QACD,MAAM,CAAC,IAAI,CAAC;IACd,CAAC;IAED,IAAI,OAAO;QACT,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IAED,IAAI,OAAO,CAAC,KAAuB;QACjC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;IACxB,CAAC;IAED,IAAI,eAAe;QACjB,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC;IAC/B,CAAC;IAED,IAAI,eAAe,CAAC,KAAyB;QAC3C,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;IAChC,CAAC;CACF","sourcesContent":["import { PeerCollection } from '../peer/collection';\nimport { DataChannelCollection } from '../channel/collection';\n\nexport class Connection {\n  private _servers: RTCConfiguration = {};\n  private _dataConstraints?: RTCDataChannelInit = null;\n  private _peers: PeerCollection = {};\n  private _channels: DataChannelCollection = {};\n\n  constructor(servers: RTCConfiguration = {}, dataConstraints: RTCDataChannelInit = null) {\n    this._servers = servers;\n    this._dataConstraints = dataConstraints;\n  }\n\n  get peers(): PeerCollection {\n    return this._peers;\n  }\n\n  get channels(): DataChannelCollection {\n    return this._channels;\n  }\n\n  addPeer(id: string, peer: RTCPeerConnection): Connection {\n    if (!this._peers.hasOwnProperty(id)) {\n      this._peers[id] = peer;\n    }\n    return this;\n  }\n\n  removePeer(id: string): Connection {\n    if (this._peers.hasOwnProperty(id)) {\n      this._peers[id].close();\n      delete this._peers[id];\n      delete this._peers[id];\n    }\n    return this;\n  }\n\n  addChannel(id: string, channel: RTCDataChannel): Connection {\n    if (!this._channels.hasOwnProperty(id)) {\n      this._channels[id] = channel;\n    }\n    return this;\n  }\n\n  removeChannel(id: string): Connection {\n    if (this._channels.hasOwnProperty(id)) {\n      this._channels[id].close();\n      delete this._channels[id];\n    }\n    return this;\n  }\n\n  get servers(): RTCConfiguration {\n    return this._servers;\n  }\n\n  set servers(value: RTCConfiguration) {\n    this._servers = value;\n  }\n\n  get dataConstraints(): RTCDataChannelInit {\n    return this._dataConstraints;\n  }\n\n  set dataConstraints(value: RTCDataChannelInit) {\n    this._dataConstraints = value;\n  }\n}\n"]}